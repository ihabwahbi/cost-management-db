# Pre-commit hooks for cost-management-db
# Install: pip install pre-commit && pre-commit install
# Manual run: pre-commit run --all-files

repos:
  - repo: local
    hooks:
      # Regenerate Context Oracle when pipeline-related files change
      # This runs all generators: pipeline-map (internal), symbols, skeletons, patterns, lineage
      - id: update-context-oracle
        name: Update Context Oracle
        entry: python3 scripts/generate_context_oracle.py
        language: system
        files: ^scripts/(stage[123]_|config/).*\.py$|^src/schema/.*\.ts$
        pass_filenames: false
        stages: [pre-commit]
